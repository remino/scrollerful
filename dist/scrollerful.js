(function(){'use strict';var style = ":root{--scrollerful-delay: 0s}.scrollerful{min-height:100%}.scrollerful--snap,.scrollerful__snap-page,.scrollerful__snap-page body{scroll-snap-stop:always;scroll-snap-type:y proximity}.scrollerful--snap,.scrollerful__snap-page{overflow-y:auto}.scrollerful--snap .scrollerful__tray,.scrollerful__snap-page .scrollerful__tray{scroll-snap-align:start end}.scrollerful--snap{height:100%}.scrollerful__ruler{background:none rgba(0,0,0,0);border:none;bottom:0;display:block;height:100lvh;left:-200%;pointer-events:none;position:absolute;top:0;user-select:none;width:1rem;z-index:-10}.scrollerful__plate{align-items:center;display:flex;flex-flow:column;height:100lvh;justify-content:center;max-height:100%;overflow:hidden;position:sticky;top:0}.scrollerful__sprite,.scrollerful__sprite--inner,.scrollerful__sprite--outer{animation-duration:100s;animation-fill-mode:both;animation-play-state:paused;animation-timing-function:linear}.scrollerful__sprite,.scrollerful__sprite--inner{animation-delay:calc(var(--scrollerful-progress-inner, 0)*-100s + var(--scrollerful-delay, 0))}.scrollerful__sprite,.scrollerful__sprite--outer{animation-delay:calc(var(--scrollerful-progress-outer, 0)*-100s + var(--scrollerful-delay, 0))}.scrollerful__tray{height:300lvh;position:relative}.scrollerful__tray--padding{height:100lvh}";const SCRIPT_NAME="scrollerful",CSS_CLASS_INSIDE_INNER=`${SCRIPT_NAME}--inside--inner`,CSS_CLASS_INSIDE_OUTER=`${SCRIPT_NAME}--inside--outer`,CSS_CLASS_RULER=`${SCRIPT_NAME}__ruler`,CSS_PROP_PROGRESS_INNER=`--${SCRIPT_NAME}-progress-inner`,CSS_PROP_PROGRESS_OUTER=`--${SCRIPT_NAME}-progress-outer`,EVENT_INNER_ENTER=`${SCRIPT_NAME}innerenter`,EVENT_INNER_EXIT=`${SCRIPT_NAME}innerexit`,EVENT_OUTER_ENTER=`${SCRIPT_NAME}outerenter`,EVENT_OUTER_EXIT=`${SCRIPT_NAME}outerexit`,EVENT_SCROLL=`${SCRIPT_NAME}scroll`,SEL_SNAP=`.${SCRIPT_NAME}--snap`,SEL_TRAY=`.${SCRIPT_NAME}__tray`,EL_ID_RULER=`${SCRIPT_NAME}_ruler`,EL_ID_STYLE=`${SCRIPT_NAME}_style`,sortNums=(...e)=>e.sort(((e,t)=>e-t)),isWithin=(e,t,r)=>{const[E,n]=sortNums(t,r);return e>=E&&e<=n},addRuler=()=>{const e=document.createElement("div");e.setAttribute("id",EL_ID_RULER),e.classList.add(CSS_CLASS_RULER),document.body.appendChild(e);},addStyle=()=>{if(document.getElementById(EL_ID_STYLE))return;const e=document.createElement("style");e.setAttribute("id",EL_ID_STYLE),e.textContent=style,document.head.appendChild(e);},getContainerCoords=e=>{if(["auto","scroll"].includes(getComputedStyle(e).getPropertyValue("overflow-y"))){const t=e.getBoundingClientRect(),{top:r,height:E}=t,{scrollHeight:n}=e;return {containerTop:r,containerHeight:n,viewHeight:E}}const t=document.getElementById(EL_ID_RULER).getBoundingClientRect().height,{height:r,top:E}=e.getBoundingClientRect();return {containerTop:E,containerHeight:r,viewHeight:t}},sectionProgress=e=>{const{containerTop:t,containerHeight:r,viewHeight:E}=getContainerCoords(e);return {inner:t/-(r-E),outer:(t-E)/-(r+E)}},processSection=e=>{const t=sectionProgress(e);e.dispatchEvent(new CustomEvent(EVENT_SCROLL,{detail:{progress:t},bubbles:!0,cancelable:!0,composed:!1}));},removeStyleProperties=(e,...t)=>{t.forEach((t=>e.style.removeProperty(t)));},setStyleVars=({target:e,detail:{progress:{inner:t,outer:r}}})=>{isWithin(r,0,1)?(e.style.setProperty(CSS_PROP_PROGRESS_INNER,t),e.style.setProperty(CSS_PROP_PROGRESS_OUTER,r)):removeStyleProperties(e,CSS_PROP_PROGRESS_INNER,CSS_PROP_PROGRESS_OUTER);},triggerEnterExit=(e,t,r,E,n)=>{isWithin(t,0,1)?e.classList.contains(n)||(e.classList.add(n),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,cancelable:!0,composed:!1}))):e.classList.contains(n)&&(e.classList.remove(n),e.dispatchEvent(new CustomEvent(E,{bubbles:!0,cancelable:!0,composed:!1})));},triggerInnerEnterExit=({target:e,detail:{progress:{inner:t}}})=>{triggerEnterExit(e,t,EVENT_INNER_ENTER,EVENT_INNER_EXIT,CSS_CLASS_INSIDE_INNER);},triggerOuterEnterExit=({target:e,detail:{progress:{outer:t}}})=>{triggerEnterExit(e,t,EVENT_OUTER_ENTER,EVENT_OUTER_EXIT,CSS_CLASS_INSIDE_OUTER);},scroll=({target:e})=>{Array.from(e.querySelectorAll(SEL_TRAY)).forEach((e=>{processSection(e);}));},addSectionListeners=e=>{Array.from(e.querySelectorAll(SEL_TRAY)).forEach((e=>{e.addEventListener(EVENT_SCROLL,setStyleVars),e.addEventListener(EVENT_SCROLL,triggerOuterEnterExit),e.addEventListener(EVENT_SCROLL,triggerInnerEnterExit);}));},scrollerful=()=>{addStyle(),addRuler(),Array.from(document.querySelectorAll(SEL_SNAP)).forEach((e=>{e.addEventListener("resize",scroll),e.addEventListener("scroll",scroll),addSectionListeners(e),scroll({target:e});})),window.addEventListener("resize",scroll),window.addEventListener("scroll",scroll),addSectionListeners(document),scroll({target:document});};"interactive"===document.readyState?scrollerful():document.addEventListener("DOMContentLoaded",scrollerful);})();