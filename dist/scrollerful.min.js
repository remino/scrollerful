/*! scrollerful v0.5.1 | (c) 2022-2023 RÃ©mino Rem <https://remino.net/> | ISC Licence */
(function(g,f){typeof exports==='object'&&typeof module!=='undefined'?module.exports=f():typeof define==='function'&&define.amd?define(f):(g=typeof globalThis!=='undefined'?globalThis:g||self,g.scrollerful=f());})(this,(function(){'use strict';var e = ":root{--scrollerful-delay:0s}@media screen{.scrollerful--enabled .scrollerful{min-height:100%}@supports(scroll-snap-stop:always){.scrollerful--enabled .scrollerful--snap,.scrollerful--enabled .scrollerful--snap--page,.scrollerful--enabled .scrollerful--snap--page body{scroll-snap-stop:always;scroll-snap-type:y proximity}}.scrollerful--enabled .scrollerful--snap,.scrollerful--enabled .scrollerful--snap--page{overflow-y:auto}@supports(scroll-snap-stop:always){.scrollerful--enabled .scrollerful--snap .scrollerful__tray,.scrollerful--enabled .scrollerful--snap--page .scrollerful__tray{scroll-snap-align:start end}}.scrollerful--enabled .scrollerful--snap{height:100%}.scrollerful--enabled .scrollerful--x{display:flex;flex-flow:row nowrap}.scrollerful--enabled .scrollerful--x.scrollerful--snap{overflow-x:auto;overflow-y:hidden}@supports(scroll-snap-stop:always){.scrollerful--enabled .scrollerful--x.scrollerful--snap{scroll-snap-type:x proximity}}.scrollerful--enabled .scrollerful--x .scrollerful__plate{left:0;max-height:none;max-width:100%;top:auto;width:100vw;width:100lvw}.scrollerful--enabled .scrollerful--x .scrollerful__tray{flex-shrink:0;height:auto;width:300vw;width:300lvw}.scrollerful--enabled .scrollerful--x .scrollerful__tray--padding{height:auto;width:100vw;width:100lvw}.scrollerful--enabled .scrollerful__ruler{background:none transparent;border:none;bottom:0;display:block;height:100vh;height:100lvh;left:-200%;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100vw;width:100lvw;z-index:-10}.scrollerful--enabled .scrollerful__plate{align-items:center;display:flex;flex-flow:column;height:100vh;height:100lvh;justify-content:center;max-height:100%;overflow:hidden;position:sticky;top:0}.scrollerful--enabled .scrollerful__sprite,.scrollerful--enabled .scrollerful__sprite--inner,.scrollerful--enabled .scrollerful__sprite--outer{animation-duration:100s;animation-fill-mode:both;animation-play-state:paused;animation-timing-function:linear}.scrollerful--enabled .scrollerful__sprite,.scrollerful--enabled .scrollerful__sprite--inner{animation-delay:calc(var(--scrollerful-progress-inner, 0)*-100s + var(--scrollerful-delay, 0))}.scrollerful--enabled .scrollerful__sprite,.scrollerful--enabled .scrollerful__sprite--outer{animation-delay:calc(var(--scrollerful-progress-outer, 0)*-100s + var(--scrollerful-delay, 0))}.scrollerful--enabled .scrollerful__tray{height:300vh;height:300lvh;position:relative}.scrollerful--enabled .scrollerful__tray--padding{height:100vh;height:100lvh}}";const t="scrollerful",n=`${t}--enabled`,r=`${t}--x`,s=`${t}--inside--inner`,o=`${t}--inside--outer`,i=`${t}__ruler`,l=`--${t}-progress-inner`,a=`--${t}-progress-outer`,c=`${t}innerenter`,d=`${t}innerexit`,u=`${t}outerenter`,m=`${t}outerexit`,g=`${t}scroll`,p=`.${t}`,y=`.${t}__tray`,E=`${t}_ruler`,b=`${t}_style`;let v;const h=(e,t=!1)=>t?e.scrollWidth:e.scrollHeight,$=e=>document.getElementById(E).getBoundingClientRect()[e?"width":"height"],L=(e,t,n)=>{const[r,s]=((...e)=>e.sort(((e,t)=>e-t)))(t,n);return e>=r&&e<=s},f=async(e,t)=>{const n=((e,t)=>{const{containerStart:n,containerSize:r,viewSize:s}=((e,t)=>{const{size:n,start:r}=((e,t=!1)=>{if(t){const{left:t,width:n}=e.getBoundingClientRect();return {size:n,start:t}}const{height:n,top:r}=e.getBoundingClientRect();return {size:n,start:r}})(e,t),s=((e,t)=>["auto","scroll"].includes(getComputedStyle(e).getPropertyValue("overflow-"+(t?"x":"y"))))(e,t);return {containerStart:r,containerSize:s?h(e,t):n,viewSize:s?n:$(t)}})(e,t);return {inner:n/-(r-s),outer:(n-s)/-(r+s)}})(e,t);e.dispatchEvent(new CustomEvent(g,{detail:{progress:n},bubbles:!0,cancelable:!0,composed:!1}));},w=({target:e,detail:{progress:{inner:t,outer:n}}})=>{var r;L(n,0,1)?(e.style.setProperty(l,t),e.style.setProperty(a,n)):(r=e,[l,a].forEach((e=>r.style.removeProperty(e))));},C=(e,t,n,r,s)=>{L(t,0,1)?e.classList.contains(s)||(e.classList.add(s),e.dispatchEvent(new CustomEvent(n,{bubbles:!0,cancelable:!0,composed:!1}))):e.classList.contains(s)&&(e.classList.remove(s),e.dispatchEvent(new CustomEvent(r,{bubbles:!0,cancelable:!0,composed:!1})));},S=({target:e,detail:{progress:{inner:t}}})=>{C(e,t,c,d,s);},z=({target:e,detail:{progress:{outer:t}}})=>{C(e,t,u,m,o);},A=({target:e})=>{v&&cancelAnimationFrame(v),v=requestAnimationFrame((()=>{(async e=>{const t=e.classList.contains(r);Promise.all([e,...e.querySelectorAll(y)].map((e=>f(e,t))));})(e),v=null;}));},x=e=>{[e,...e.querySelectorAll(y)].forEach((e=>{e.addEventListener(g,w),e.addEventListener(g,z),e.addEventListener(g,S);}));};var scrollerful = ()=>{(()=>{if(document.getElementById(b))return;const t=document.createElement("style");t.setAttribute("id",b),t.textContent=e,document.head.appendChild(t);})(),(()=>{const e=document.createElement("div");e.setAttribute("id",E),e.classList.add(i),document.body.appendChild(e);})(),Array.from(document.querySelectorAll(p)).forEach((e=>{e.addEventListener("resize",A),e.addEventListener("scroll",A),x(e),A({target:e});})),window.addEventListener("resize",(()=>A({target:document.body}))),window.addEventListener("scroll",(()=>A({target:document.body}))),x(document.body),A({target:document.body}),document.documentElement.classList.add(n);};return scrollerful;}));